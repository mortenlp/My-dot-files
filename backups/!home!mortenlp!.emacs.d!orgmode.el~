;; Org-mode settings
(require 'org-install)
(require 'org-contacts)

;; Org files
( setq org-agenda-files (quote ("~/Dokumenter/AU/MasterThesis/Agenda/Todos.org" "~/Dokumenter/AU/MasterThesis/Agenda/schedule.org" "~/Dokumenter/OrgMode/Notes.org")))
(setq org-mobile-files (quote ("~/Dropbox/Dokumenter/OrgMode/Notes.org")))

;; Wrap long lines
(add-hook 'org-mode-hook 'turn-on-auto-fill)

;; Use Org-mode for .org, .org-archive and .txt files
(add-to-list 'auto-mode-alist '("\\.\\(org\\|org_archive\\|txt\\)$" . org-mode))

;; Set keybindings
(global-set-key "\C-cl" 'org-store-link)
(global-set-key "\C-ca" 'org-agenda)
(define-key global-map "\C-cc" 'org-capture)

(global-font-lock-mode 1)

;; Define various sequences
(setq org-todo-keywords
      '((sequence "TODO(t)" "|" "DONE(d)")
        (sequence "STARTED(s)" "IN PROGRESS(i)" "|" "FINISHED(e)")
        (sequence "REPORT(r)" "BUG(b)" "KNOWNCAUSE(k)" "|" "FIXED(f)")
        (sequence "|" "CANCELED(c)")))

;; Set drawers
(setq org-drawers (quote ("PROPERTIES" "SETUP")))

;; Set default notes file
(setq org-default-notes-file (expand-file-name "~/Dropbox/Dokumenter/OrgMode/Notes.org"))

;; Define templates
(setq org-capture-templates
      '(("t" "Todo" entry (file+headline "~/Dropbox/Dokumenter/OrgMode/Notes.org" "Opgaver")
             "* TODO %? %^g\n  %i\n  %a\n")
        ("j" "Journal" entry (file+datetree "~/Dropbox/Dokumenter/OrgMode/Journal.org")
             "* %?\nEntered on %U\n  %i\n  %a\n")
        ("ø" "JeanneØnsker" entry (file+headline "~/Dropbox/Dokumenter/OrgMode/Notes.org" "Gaveidéer til Jeanne")
         "* %?\n %^g\n")
        ("h" "Husk" entry (file+headline "~/Dropbox/Dokumenter/OrgMode/Notes.org" "Husk") "* %?\n")))

;; MobileOrg
(setq org-mobile-directory "~/Dropbox/OrgMobile")
(setq org-directory "~/Dropbox/Dokumenter/OrgMode")
(setq org-mobile-inbox-for-pull "~/Dropbox/OrgMobile/from-mobile.org")

;; Activate orgstruct in gnus
(setq message-mode-hook
      (quote (orgstruct++-mode
              (lambda nil (setq fill-column 72) (flyspell-mode 1))
              turn-on-auto-fill
              bbdb-define-all-aliases)))